<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Una Cara Más</title>
  </head>

  <body>
    <!-- HEADER ELEMENTS (always visible) -->
    <div class="world-clocks">
      <div class="city" data-timezone="America/New_York">NYC: <span class="clock"></span></div>
      <div class="city" data-timezone="America/New_York">Miami: <span class="clock"></span></div>
      <div class="city" data-timezone="America/Phoenix">Phoenix: <span class="clock"></span></div>
      <div class="city" data-timezone="America/Puerto_Rico">San Juan: <span class="clock"></span></div>
      <div class="city" data-timezone="Europe/London">London: <span class="clock"></span></div>
      <div class="city" data-timezone="Asia/Tokyo">Tokyo: <span class="clock"></span></div>
    </div>

    <p class="artist-name">KOVA PARKER</p>
    <div id="live-clock" class="live-clock"></div>

    <main class="scroll-container">
      <!-- PANEL 1 -->
      <section class="panel panel-1">
        <img src="/images/gemini.png" alt="Album Cover" class="album-cover-fullscreen" />
        <video id="promo-video" class="promo-video" playsinline></video>

        <button class="enter-button">ENTER</button>

        <div class="album-info">
          <p class="album-title">UNA CARA MÁS</p>
          <p class="album-date">DROPPED ON FEBRUARY 28, 2025</p>
        </div>
      </section>

      <!-- PANEL 2 -->
      <section class="panel panel-2">
        <div class="poster-grid">
          <!-- Poster Items with hover videos -->
          <div class="poster-item">
            <img src="/images/goboy.png" alt="Go Boy" />
            <video class="poster-video" src="/videos/goboy.mp4" muted loop playsinline></video>
          </div>
          <div class="poster-item">
            <img src="/images/manana.png" alt="Mañana" />
            <video class="poster-video" src="/videos/manana.mp4" muted loop playsinline></video>
          </div>
          <div class="poster-item">
            <img src="/images/undia.png" alt="Un Día" />
            <video class="poster-video" src="/videos/undia.mp4" muted loop playsinline></video>
          </div>
          <div class="poster-item">
            <img src="/images/gioia.png" alt="Gioia" />
            <video class="poster-video" src="/videos/gioia.mp4" muted loop playsinline></video>
          </div>
          <div class="poster-item">
            <img src="/images/togya.png" alt="Togya" />
            <video class="poster-video" src="/videos/togya.mp4" muted loop playsinline></video>
          </div>
          <div class="poster-item">
            <img src="/images/obsesivo.png" alt="Obsesivo" />
            <video class="poster-video" src="/videos/obsesivo.mp4" muted loop playsinline></video>
          </div>
          <div class="poster-item">
            <img src="/images/redrocks.png" alt="Red Rocks" />
            <video class="poster-video" src="/videos/redrocks.mp4" muted loop playsinline></video>
          </div>
          <div class="poster-item">
            <img src="/images/yono.png" alt="Yo No" />
            <video class="poster-video" src="/videos/yono.mp4" muted loop playsinline></video>
          </div>
        </div>
      </section>

      <!-- PANEL 3 -->
      <section class="panel panel-3">
        <h1>Section 3</h1>
      </section>
    </main>

    <!-- Scripts -->
    <script type="module">
      const MONTHS = ["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"];
      function padZero(num) { return num.toString().padStart(2, '0'); }

      function formatWorldClock(date, tz) {
        const options = { timeZone: tz };
        const local = new Date(date.toLocaleString('en-US', options));
        const month = MONTHS[local.getMonth()];
        const day = local.getDate();
        const hours = padZero(local.getHours());
        const minutes = padZero(local.getMinutes());
        return `${month} ${day} ${hours}:${minutes}`;
      }

      function formatLiveClock(date) {
        const month = MONTHS[date.getMonth()];
        const day = date.getDate();
        const year = date.getFullYear();
        const hours = padZero(date.getHours());
        const minutes = padZero(date.getMinutes());
        const seconds = padZero(date.getSeconds());
        return `${month} ${day} ${year} ${hours}:${minutes}:${seconds}`;
      }

      function updateClock() {
        const now = new Date();
        document.getElementById('live-clock').textContent = formatLiveClock(now);
        document.querySelectorAll('.city').forEach(city => {
          const tz = city.getAttribute('data-timezone');
          city.querySelector('.clock').textContent = formatWorldClock(now, tz);
        });
      }
      setInterval(updateClock, 1000); updateClock();

      // PANEL 1 elements
      const enterButton = document.querySelector('.enter-button');
      const albumCover = document.querySelector('.album-cover-fullscreen');
      const albumInfo = document.querySelector('.album-info');
      const promoVideo = document.getElementById('promo-video');
      const panel1 = document.querySelector('.panel-1');
      const panel2 = document.querySelector('.panel-2');

      const worldClocksEl = document.querySelector('.world-clocks');
      const liveClockEl = document.getElementById('live-clock');

      let promoStarted = false;

      promoVideo.src = '/videos/promo.mov';
      promoVideo.volume = 1;

      // ENTER click
      enterButton.addEventListener('click', () => {
        albumCover.style.display = 'none';
        albumInfo.style.display = 'none';
        enterButton.style.display = 'none';
        promoVideo.style.display = 'block';
        promoVideo.play();
        promoStarted = true;
      });

      // Video ends → scroll to Panel 2
      promoVideo.addEventListener('ended', () => {
        panel2.scrollIntoView({ behavior: 'smooth' });
      });

      // Scroll behavior
      document.querySelector('.scroll-container').addEventListener('scroll', () => {
        const scrollTop = panel1.parentElement.scrollTop;
        const panel1Height = panel1.offsetHeight;

        if (scrollTop >= panel1Height) {
          worldClocksEl.style.color = 'black';
          liveClockEl.style.color = 'black';
          if (!promoVideo.ended && promoStarted) promoVideo.pause();
        } else {
          worldClocksEl.style.color = 'white';
          liveClockEl.style.color = 'white';
          if (!promoVideo.ended && promoVideo.paused && promoStarted) promoVideo.play();
          if (promoVideo.ended) {
            promoVideo.style.display = 'none';
            albumCover.style.display = 'block';
            albumInfo.style.display = 'flex';
            enterButton.style.display = 'block';
            promoStarted = false;
          }
        }
      });

      // Poster hover videos
      const posterItems = document.querySelectorAll('.poster-item');
      posterItems.forEach(item => {
        const video = item.querySelector('.poster-video');
        item.addEventListener('mouseenter', () => {
          video.style.display = 'block';
          video.play();
        });
        item.addEventListener('mouseleave', () => {
          video.pause();
          video.style.display = 'none';
        });
      });
    </script>
  </body>
</html>

<style>
  html, body { margin: 0; height: 100%; }
  body { font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif; overflow: hidden; }

  .scroll-container { height: 100vh; overflow-y: auto; scroll-snap-type: y mandatory; }

  .panel {
    height: 100vh;
    scroll-snap-align: start;
    scroll-snap-stop: always;
    position: relative;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    color: white;
  }

  .panel-2, .panel-3 { font-size: 4rem; }
  .panel-2 { background: white; }
  .panel-3 { background: #555; }

  .panel video { width: 100%; height: 100%; object-fit: cover; pointer-events: none; }

  .panel-1 { background: white; }
  .album-cover-fullscreen {
    position: absolute; top:0; left:0; width:100%; height:100%; object-fit: cover; z-index:1;
  }
  .promo-video {
    position:absolute; top:0; left:0; width:100%; height:100vh; object-fit:cover; display:none; z-index:5; pointer-events:none;
  }

  .world-clocks {
    position: fixed; top:1rem; left:1rem;
    display:flex; flex-direction: column; gap:0.25rem;
    font-size: clamp(0.6rem,1vw,0.9rem); font-family: monospace; text-transform: uppercase; color:white; z-index:999;
  }
  .world-clocks .city { display:flex; gap:0.25rem; }

  .artist-name {
    position: fixed; top:1rem; left:50%; transform:translateX(-50%);
    font-size: clamp(1rem,2.5vw,1.5rem); font-weight:bold; text-transform:uppercase; margin:0; z-index:999; color:white;
    mix-blend-mode: difference; text-align:center;
  }

  .live-clock {
    position: fixed; top:1rem; right:1rem; font-family: monospace;
    font-size: clamp(0.7rem,1.2vw,0.9rem); text-transform:uppercase; z-index:999; text-align:right; color:white;
  }

  .enter-button {
    position:absolute; bottom:clamp(15%,20vh,18%); left:50%; transform:translateX(-50%);
    background-color:white; color:black; border:none;
    padding: clamp(0.3rem,1vw,0.6rem) clamp(0.8rem,2vw,1.2rem);
    font-size: clamp(0.8rem,1.5vw,1rem); font-weight:bold; text-transform:uppercase;
    cursor:pointer; z-index:2; transition:background 0.3s, transform 0.2s;
  }
  .enter-button:hover { background-color:#eee; transform:translateX(-50%) scale(1.05); }

  .album-info {
    position:absolute; bottom:clamp(5%,8vh,6%); left:50%; transform:translateX(-50%);
    display:flex; flex-direction:column; align-items:center; gap:0.25rem; text-transform:uppercase; z-index:2;
  }
  .album-title, .album-date { color:white; }
  .album-title { font-size: clamp(0.6rem,1.5vw,0.9rem); font-weight:bold; margin:0; text-align:center; }
  .album-date { font-size: clamp(0.5rem,1vw,0.8rem); opacity:0.8; margin:0; text-align:center; }

  /* Poster grid for Panel 2 */
  .poster-grid {
    display:grid;
    grid-template-columns: repeat(4, 1fr);
    grid-auto-rows: auto;
    gap:1rem;
    width:90%;
    max-width:1200px;
    margin:0 auto;
  }
  .poster-item { position:relative; overflow:hidden; cursor:pointer; }
  .poster-item img { width:100%; height:auto; display:block; }
  .poster-item .poster-video { position:absolute; top:0; left:0; width:100%; height:100%; object-fit:cover; display:none; z-index:1; }
</style>
